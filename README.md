# WARP (Warband Advanced Runtime Patcher)

Инструмент для модификации движка *Mount & Blade: Warband (WSE2)* в реальном времени.

### Концепция

WARP — ответ современному софту. Никаких фреймворков, никаких "черных ящиков" и инсталляторов на гигабайт. Весь инструментарий весит **менее 100 Кб**, включая графический интерфейс.

Программа распространяется в исходниках и компилирует сама себя при каждом запуске. Моды — это не бинарные DLL, а обычные C-файлы. Это гарантирует безопасность (вы всегда видите код, который исполняете) и позволяет редактировать логику игры — или самого патчера — в обычном Блокноте.

*(Для более комфортной работы рекомендуется IDE; например, Visual Studio Code)*

### Механика работы

В основе лежит JIT-компиляция через **TCC (Tiny C Compiler)** и динамический анализ памяти.

#### 1. PDB Analysis

При первом старте WARP анализирует отладочную информацию (PDB) игры. Он извлекает внутренние структуры данных, классы и адреса функций движка.

#### 2. Code Generation

После анализа WARP автоматически генерирует C-хедеры. По сути, он на лету воссоздает SDK закрытого движка (`mb_api`), делая его доступным для вашего кода.

#### 3. JIT-Compilation

Пользовательские плагины (мини-моды) компилируются TCC прямо в памяти, линкуясь с сгенерированным SDK.

#### 4. Code Injection

Скомпилированный байт-код внедряется в адресное пространство процесса. WARP расставляет хуки (trampolines) на нативные функции движка, перенаправляя исполнение на пользовательскую логику.

#### 5. Mode Sharing

Пользователи могут свободно обмениваться между собой текстовыми исходниками. Это исключает возможность внедрения скрытых вредоносных закладок в моды.

### Сборка и запуск

1.  Запустите `WARP_install.bat`.
    - Скрипт загрузит TCC.
    - Соберет ядро системы.
2.  Используйте `WARP_launcher.exe` для запуска игры с патчером.
3.  Графический интерфейс `WARP_manager.exe` позволяет легко включать / отключать любые пользовательские моды.

### Стек

- **Язык:** C99
- **Core:** WinAPI, TCC (libtcc), Memory Hooking (x86).
- **Debug Info:** PDB Parsing (DbgHelp).

---

*(Проект является Proof-of-Concept демонстрацией возможностей runtime-кодогенерации и инъекций).*
